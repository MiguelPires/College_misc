\section{Protocol}
%
\begin{definition}
(Multi-valued wait-free consensus with adversary $\mathcal{A}$)

A process is \emph{correct} with respect to crash adversary 
in an execution $E$ if it takes infinitely many steps in $E$.
%
\begin{itemize}
\item (Agreement): No two processes agree on different values  
\item (Liveness): Every correct process (w.r.t $\mathcal{A}$) 
eventually decides on a value previously proposed by a correct process (w.r.t $\mathcal{A}$).
\end{itemize}
%
\end{definition}
%
\input{algo_cft}
%
\newpage
We now present the adapted Generalized Paxos protocol for a Byzantine adversary.\par
\textbf{Algorithm 6} The goal of the view change sub-protocol is to ensure that when a correct process suspects the leader to be faulty all processes commit to a new view (i.e., a new ballot) and stop participating in lower-numbered ballots. To this end, processes can multicast suspicion messages if they believe that the leader is faulty. If a correct process receives $f+1$ suspicions then it stops participating in the previous ballot and multicasts a view-change message. When a process receives $2f+1$ view-change messages then it can start participating in the new ballot. If a process receives a view-change message without previously receiving $f+1$ suspicions, it commits to the new view and multicasts a view-change message. View-change messages contain a ballot number, the previously committed ballot and value, and proof that the sending process has received $f+1$ suspicions. This proof allows a process that receives this message to commit to the new view and multicast its own view-change messages without receiving $f+1$ suspicions itself. This is necessary because some of the suspicions may have been sent by faulty processes that only sent the suspicions to some processes. This guarantees that if one correct process received the $f+1$ suspicions and broadcasted the view-change message, then all correct processes will receive that message, validate the proof of $f+1$ suspicions and switch to the new view. Processes commit to the new view as soon as they broadcast their view-change messages since the multicast of one correct view-change messages is all it takes to ensure that all correct process will switch to the new view.

\input{algo_bft}