\section{Protocol}
%
\begin{definition}
(Multi-valued wait-free consensus with adversary $\mathcal{A}$)

A process is \emph{correct} with respect to crash adversary 
in an execution $E$ if it takes infinitely many steps in $E$.
%
\begin{itemize}
\item (Agreement): No two processes agree on different values  
\item (Liveness): Every correct process (w.r.t $\mathcal{A}$) 
eventually decides on a value previously proposed by a correct process (w.r.t $\mathcal{A}$).
\end{itemize}
%
\end{definition}
%
\input{algo_cft}
%
\newpage
We now present the adapted Generalized Paxos protocol for a Byzantine adversary.\par
\textbf{View Change} The goal of the view change sub-protocol is to ensure that when $f+1$ processes suspect the leader to be faulty all correct processes commit to a new view (i.e., a new ballot) and stop participating in lower-numbered ballots. To this end, processes can multicast suspicion messages if they believe that the leader is faulty. Suspicions contain the current view number signed by the sending process in a verifiable way. If a correct process receives $f+1$ suspicions then it stops participating in the previous ballot and multicasts a view-change message. View-change messages contain a ballot number, the previously committed ballot and value, and proof that the sending process has received $f+1$ suspicions. This proof consists in the signatures sent in each suspicion message. If a process receives a view-change message without previously receiving $f+1$ suspicions, it commits to the new view and multicasts a view-change message.  The proof allows a process that receives this message to commit to the new view and multicast its own view-change messages without receiving $f+1$ suspicions itself. The process must only confirm that the signatures are valid and correspond to suspicions sent by distinct processes for the current view. This guarantees that if one correct process received the $f+1$ suspicions and broadcasted the view-change message, then all correct processes will receive that message, validate the proof of $f+1$ suspicions and switch to the new view. Processes start participating in the new view as soon as they broadcast their view-change messages since the multicast of one correct view-change messages is all it takes to ensure that all correct process will eventually switch to the new view. \par
\textbf{Proof} We can prove that $f+1$ suspicions trigger a new view successfully since as soon as one process receives those suspicions it will broadcast a view-change message containing a proof that $f+1$ processes suspect the leader. When other processes receive either the $f+1$ suspicions or the view-change message, they will broadcast their own view-change messages and start participating in the new view. Faulty processes alone can't force a new view since $f+1$ suspicions are required for any correct process to commit to the new view.\par

\input{algo_bft}